## Общие факты

Сайт использует кодировку utf-8 для всех запросов и ответов.
Для POST-запросов используется формат application/x-www-form-urlencoded.
Параметры запросов могут отправляться как в адресе страницы (GET), так и
в отправляемых данных (POST), и оба метода дают одинаковый результат.

Для записи дат используется формат "`d.m.Y`", для времени - "`H:i`" (в нотации php-функции date)

## Запросы с RID

Для выполнения длительных операций сайт использует асинхронную модель:
запросу выдается уникальный идентификатор (`RID`), по которому можно проверить
статус обработки запроса и получить ответ, когда он будет готов.

### Техническая реализация

На ajax-запросы приходит ответ в формате json, в котором есть параметр *"`result`"*,
показывающий статус запроса. Он может принимать следующие известные значения:

- "`OK`" - Запрос успешно выполнен. В json-ответе будут присутствовать дополнительные данные.
- "`Error`", "`FAIL`" - Запрос некорректен (например, отсутствует обязательный параметр).
- "`RID`" - Запрос принят в обработку. Для получения статуса запроса и/или получения ответа
необходимо произвести дополнительный запрос с добавление параметра "`rid`", равного
одноименному параметру "`rid`" (иногда "`RID`") в json-ответе. Ответ на повторные запросы с указанным `rid`
может тоже иметь `result=RID`, в таком случае запрос следует повторять, пока ответ не будет готов.

При повторных запросах с `rid` параметры исходного запроса уже необязательны и могут быть опущены.
Следует помнить, что помимо параметров запроса в адресе могут присутствовать технические параметры
(например, "`STRUCTURE_ID`" и "`layer_id`"), и они остаются обязательными для всех запросов с `rid`.

Выдаваемые при первоначальном запросе куки следует сохранить и указывать при повторных запросах.
Без данных данных сессионыых кук доступ к данным по `rid` будет запрещен.

### Пример

Первоначальный запрос:

	https://pass.rzd.ru/timetable/public/ru?STRUCTURE_ID=735&layer_id=5371&dir=0&tfl=3&checkSeats=1&code0=2000000&dt0=08.03.2016&code1=2004000
	{"result":"RID","rid":"470407923",...}

Повторный запрос с выданным rid=470407923:

	https://pass.rzd.ru/timetable/public/ru?STRUCTURE_ID=735&layer_id=5371&rid=470414517
	{"result":"OK",...}
